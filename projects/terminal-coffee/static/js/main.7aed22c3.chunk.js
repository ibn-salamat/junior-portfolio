(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{17:function(e,n,t){e.exports=t(24)},24:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(13),i=t.n(c),o=t(2),l=t(3);function u(){var e=Object(o.a)(["\n  display: flex;\n  padding: 10px 15px;\n  justify-content: space-between;\n  align-items: center;\n\n  img {\n    width: 80px;\n  }\n"]);return u=function(){return e},e}function p(){return a.a.createElement(d,null,a.a.createElement("img",{src:"logo.png"}),a.a.createElement("h1",null,"React Coffee"))}var d=l.b.div(u()),s=t(6),f=t(4),m=t(9),b=t(1),g=function(e,n){var t=n.payload;switch(n.type){case"CHANGE_QUANTITY":var r=t.key,a=t.title,c=t.step,i=e.products[r].map((function(e){if(e.title===a){var n=e.quantity+c;return Object(b.a)(Object(b.a)({},e),{},{quantity:n<0?0:n})}return e}));return Object(b.a)(Object(b.a)({},e),{},{products:Object(b.a)(Object(b.a)({},e.products),{},Object(m.a)({},r,i))});case"CHANGE_PLACE":var o=t.id,l=t.orderId,u=null,p=e.places.map((function(e){return!!e.owner&&e.owner!==l?e:e.id===o?(u=e.owner?null:e.id,{id:e.id,owner:e.owner?null:l}):{id:e.id,owner:null}}));return Object(b.a)(Object(b.a)({},e),{},{places:p,currentPlace:u});case"TO_ORDER":var d=Object(b.a)(Object(b.a)(Object(b.a)({},t),t.total),{},{place:e.currentPlace,remainingSeconds:60*t.total.timePrepare});return delete d.total,Object(b.a)(Object(b.a)({},e),{},{processOrders:[].concat(Object(f.a)(e.processOrders),[d]),products:{coffees:e.products.coffees.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{quantity:0})})),additional:e.products.additional.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{quantity:0})}))},currentPlace:null,orderId:e.orderId+1});case"CHANGE_PROCESS_ORDER":var s=Object(f.a)(e.processOrders),g=Object(f.a)(e.finishedOrders);return t.done?(g.push(t),s=s.filter((function(e){return e.orderId!==t.orderId}))):s=e.processOrders.map((function(e){return Object(b.a)(Object(b.a)({},e),{},{remainingSeconds:e.orderId===t.orderId?e.remainingSeconds-1:e.remainingSeconds})})),Object(b.a)(Object(b.a)({},e),{},{processOrders:s,finishedOrders:g});default:return e}};var E={products:{coffees:[{title:"Americano 0.5",price:350,timePrepare:1,quantity:0,imgSrc:"https://d2lswn7b0fl4u2.cloudfront.net/photos/pg-recipes-americano-1571757341897.jpg"},{title:"Americano 0.75",price:450,timePrepare:3,quantity:0,imgSrc:"https://www.comunicaffe.com/wp-content/uploads/2014/02/Americano1.jpeg"},{title:"Latte 0.75",price:400,timePrepare:3,quantity:0,imgSrc:"https://media-cdn.tripadvisor.com/media/photo-s/14/53/a4/c4/coffe.jpg"},{title:"Expresso 0.5",price:500,timePrepare:2,quantity:0,imgSrc:"https://5.imimg.com/data5/DC/TD/MY-14296065/coffee-anise-cinnamon-spices-photo-wallpaper-2-copy-500x500.jpg"}],additional:[{title:"\u0421\u0430\u0445\u0430\u0440",price:0,quantity:0,timePrepare:0,imgSrc:"https://lh3.googleusercontent.com/proxy/DqyIoUZ_nu_REKwanKJKHJx4I4dXrLoW1wKvbUoeK3Ayyt2ytLETBjWpmR8t4-sg0GXkxX0zUe4Kypw4_s2TRxSopOHRrifGXhTcxJuNZCbY2Q"},{title:"\u041f\u043e\u043d\u0447\u0438\u043a",price:700,quantity:0,timePrepare:0,imgSrc:"https://www.gastronom.ru/binfiles/images/20170707/b04eaef7.jpg"},{title:"\u041a\u043e\u0440\u0438\u0446\u0430",price:150,quantity:0,timePrepare:0,imgSrc:"https://lh3.googleusercontent.com/proxy/DqyIoUZ_nu_REKwanKJKHJx4I4dXrLoW1wKvbUoeK3Ayyt2ytLETBjWpmR8t4-sg0GXkxX0zUe4Kypw4_s2TRxSopOHRrifGXhTcxJuNZCbY2Q"}]},processOrders:[],finishedOrders:[],places:new Array(9).fill(0).map((function(e,n){return{id:++n,owner:null}})),orderId:1,currentPlace:null},x=a.a.createContext(),O=x.Provider,y=function(e){var n=e.children,t=Object(r.useReducer)(g,E),c=Object(s.a)(t,2),i=c[0],o=c[1],l=function(e){var n=Object(r.useRef)();return Object(r.useEffect)((function(){n.current=e})),n.current}(i),u=function(){l&&i.processOrders.length>l.processOrders.length&&function(e){var n=e.dispatch,t=e.payload,r=setInterval((function(){n({type:"CHANGE_PROCESS_ORDER",payload:t})}),100);setTimeout((function(){clearInterval(r),n({type:"CHANGE_PROCESS_ORDER",payload:Object(b.a)(Object(b.a)({},t),{},{done:!0,doneTime:(new Date).toLocaleTimeString()})})}),1e3*t.remainingSeconds/10)}({dispatch:o,payload:i.processOrders[i.processOrders.length-1]})};return Object(r.useEffect)((function(){u()}),[i]),a.a.createElement(O,{value:{state:i,dispatch:o}},n)};function v(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 80px;\n  height: 80px;\n  border: 1px solid rgb(244, 67, 54);\n  margin: 5px 0;\n  border-radius: 5px;\n  background: ",";\n  color: ",";\n  cursor: pointer;\n\n  &:hover {\n    box-shadow: 1px 2px 5px #afaaaab8;\n  }\n"]);return v=function(){return e},e}function j(e){var n=e.id,t=e.owner,r=e.changePlace,c=e.orderId;return a.a.createElement(h,{busy:t,onClick:function(){return r({id:n,orderId:c})}},t?"\u0437\u0430\u043d\u044f\u0442\u043e":"\u041d\u043e\u043c\u0435\u0440:".concat(n))}var h=l.b.div(v(),(function(e){return e.busy?"rgb(244, 67, 54)":"none"}),(function(e){return e.busy?"#fff":"#333"}));function w(){var e=Object(o.a)(["\n  display: grid;\n  grid-template-columns: 100px 100px 100px;\n  grid-gap: 10px;\n  background-color: #fff;\n  color: #444;\n  padding: 10px;\n"]);return w=function(){return e},e}function C(){var e=Object(r.useContext)(x),n=e.state,t=e.dispatch,c=function(e){var n;(0,(n={dispatch:t,payload:e}).dispatch)({type:"CHANGE_PLACE",payload:n.payload})};return a.a.createElement("div",null,a.a.createElement("h2",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e"),a.a.createElement(P,null,n.places.map((function(e){var t=e.id,r=e.owner;return a.a.createElement(j,{key:t,id:t,owner:r,orderId:n.orderId,changePlace:c})}))))}var P=l.b.div(w());function k(){var e=Object(o.a)(["\n  img {\n    margin: 10px 0;\n    height: 180px;\n    object-fit: cover;\n    width: 100%;\n  }\n"]);return k=function(){return e},e}function S(e){var n=e.title,t=e.price,r=e.timePrepare,c=e.quantity,i=e.imgSrc;return a.a.createElement(I,null,a.a.createElement("p",null,n," - ",t?"".concat(t," \u0442\u0435\u043d\u0433\u0435"):"\u0411\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e"),i&&a.a.createElement("img",{src:i}),!!r&&a.a.createElement("p",null,"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u0438\u044f: ",r," \u043c\u0438\u043d\u0443\u0442\u044b"),c&&a.a.createElement("p",null,"\u0428\u0442\u0443\u043a: ",c))}var I=l.b.div(k());function R(){var e=Object(o.a)(["\n  padding: 5px;\n  background: ",";\n  font-size: 18px;\n  color: ",";\n  border-radius: 5px;\n  margin: 0 3px;\n\n  &:hover {\n    box-shadow: 1px 2px 5px #afaaaab8;\n  }\n"]);return R=function(){return e},e}function q(){var e=Object(o.a)(["\n  padding: 10px;\n  display: flex;\n  justify-content: ",";\n  align-items: center;\n  margin-top: ",";\n\n  button {\n    margin: 0 5px;\n  }\n\n  p {\n    font-size: 20px;\n  }\n"]);return q=function(){return e},e}function A(){var e=Object(o.a)(["\n  *{\n    padding: 0;\n    margin: 0;\n  }\n  body {\n    font-family: Bitter;\n    box-sizing: border-box;\n  }\n\n  img{\n    max-width: 100%;\n  }\n\n  button,input{\n    outline: none;\n    border:none;\n  }\n\n  button,a{\n    cursor: pointer;\n  }\n\n"]);return A=function(){return e},e}var T=Object(l.a)(A()),_=l.b.div(q(),(function(e){return e.center?"center":"flex-start"}),(function(e){return e.marginTop?"10px":0})),D=l.b.button(R(),(function(e){return e.link?"none":"#62dbfb"}),(function(e){return e.link?"#62dbfb":"#fff"}));function K(){var e=Object(o.a)(["\n  & > * {\n    padding: 3px 10px;\n  }\n"]);return K=function(){return e},e}function G(e){var n=e.orderedCoffees,t=e.orderedAdditional,c=e.setConfirmData,i=Object(r.useContext)(x),o=i.state,l=i.dispatch,u=[].concat(Object(f.a)(n),Object(f.a)(t)).reduce((function(e,n){return{timePrepare:n.quantity*n.timePrepare+e.timePrepare,price:n.quantity*n.price+e.price}}),{timePrepare:0,price:0});return a.a.createElement(H,null,a.a.createElement("h2",null,"\u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e?"),o.currentPlace?a.a.createElement("p",null,"\u041c\u0435\u0441\u0442\u043e: ",o.currentPlace):a.a.createElement("p",null,"\u041d\u0430 \u0432\u044b\u043d\u043e\u0441"),n.map((function(e){var n=e.title,t={title:n,price:e.price,quantity:e.quantity};return a.a.createElement(S,Object.assign({key:n},t))})),t.map((function(e){var n=e.title,t={title:n,price:e.price,quantity:e.quantity};return a.a.createElement(S,Object.assign({key:n},t))})),a.a.createElement("p",null,"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u0438\u0433\u043e\u0442\u043e\u0432\u043b\u0435\u043d\u0438\u044f: ",u.timePrepare," \u043c\u0438\u043d\u0443\u0442"),a.a.createElement("p",null,"\u0418\u0442\u043e\u0433\u043e: ",u.price," \u0442\u0435\u043d\u0433\u0435"),a.a.createElement(_,{marginTop:!0},a.a.createElement(D,{onClick:function(){var e,r={coffes:n,additional:t,total:Object(b.a)(Object(b.a)({},u),{},{orderId:o.orderId})};c(null),(0,(e={dispatch:l,payload:r}).dispatch)({type:"TO_ORDER",payload:e.payload})}},"\u041f\u043e\u0434\u0432\u0435\u0440\u0434\u0438\u0442\u044c"),a.a.createElement(D,{onClick:function(){return c(null)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")))}var H=l.b.div(K());function N(){var e=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n"]);return N=function(){return e},e}function z(){var e=Object(o.a)(["\n  padding: 10px;\n  margin: 10px 0;\n  width: 240px;\n  margin: 10px;\n  font-size: 18px;\n  border-radius: 3px;\n  border: 1px solid grey;\n\n  &:hover {\n    box-shadow: 1px 2px 5px #afaaaab8;\n  }\n"]);return z=function(){return e},e}function J(e){var n=e.data,t=e.title,r=e.type,c=e.onChangeQuantity;return a.a.createElement("div",null,a.a.createElement("h2",null,t),a.a.createElement(U,null,n.map((function(e){var n=e.title,t=e.price,i=e.timePrepare,o=e.quantity,l=e.imgSrc,u={title:n,price:t,timePrepare:i,imgSrc:l};return a.a.createElement(L,{key:n},a.a.createElement(S,u),a.a.createElement(_,{center:!0},a.a.createElement(D,{link:!0,onClick:function(){return c({key:r,title:n,step:-1})}},"\u276e"),a.a.createElement("p",null,o),a.a.createElement(D,{link:!0,onClick:function(){return c({key:r,title:n,step:1})}},"\u276f")))}))))}var L=l.b.div(z()),U=l.b.div(N());function X(){var e=Object(o.a)(["\n  display: inline-block;\n  padding: 6px 5px;\n  border-radius: 5px;\n"]);return X=function(){return e},e}function Q(){var e=Object(o.a)(["\n  padding: 10px 15px;\n\n  h2 {\n    padding: 5px 10px;\n  }\n"]);return Q=function(){return e},e}function Y(){var e=Object(r.useState)(1),n=Object(s.a)(e,2),t=n[0],c=n[1],i=Object(r.useContext)(x),o=i.state,l=i.dispatch,u=o.products,p=u.coffees,d=u.additional,f=Object(r.useState)(null),m=Object(s.a)(f,2),b=m[0],g=m[1],E=function(e){var n;(0,(n={dispatch:l,payload:e}).dispatch)({type:"CHANGE_QUANTITY",payload:n.payload})};return a.a.createElement(B,null,!b&&a.a.createElement(a.a.Fragment,null,a.a.createElement(J,{type:"coffees",title:"\u041a\u043e\u0444\u0435",data:p,onChangeQuantity:E}),a.a.createElement(J,{type:"additional",title:"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e",data:d,onChangeQuantity:E}),a.a.createElement(_,null,a.a.createElement(W,{value:t,onChange:function(e){var n=e.target.value;return c(+n)}},a.a.createElement("option",{value:1},"\u041d\u0430 \u0432\u044b\u043d\u043e\u0441"),a.a.createElement("option",{value:0},"\u0417\u0434\u0435\u0441\u044c")),a.a.createElement(D,{onClick:function(){if(!(t||!t&&o.currentPlace))return alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0435\u0441\u0442\u043e");var e=p.filter((function(e){return e.quantity})),n=d.filter((function(e){return e.quantity}));if(!e.length)return alert("\u0417\u0430\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u0444\u0435");g({orderedCoffees:e,orderedAdditional:n}),c(1)}},"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c")),!t&&a.a.createElement(C,null)),b&&a.a.createElement(G,Object.assign({},b,{setConfirmData:g})))}var B=l.b.div(Q()),W=l.b.select(X());function Z(){var e=Object(o.a)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  & > div {\n    margin: 5px;\n    border: 1px solid #caa0a0c2;\n    padding: 5px;\n    width: 160px;\n    border-radius: 5px;\n    font-size: 16px;\n  }\n"]);return Z=function(){return e},e}function F(){var e=Object(o.a)(["\n  background: #333;\n  color: #62dbfb;\n  padding: 10px 15px;\n  font-weight: 900;\n  font-size: 20px;\n"]);return F=function(){return e},e}function M(){var e=Object(r.useContext)(x).state,n=e.processOrders,t=e.finishedOrders;return a.a.createElement(V,null,"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435:",a.a.createElement($,null,n.map((function(e){var n=e.orderId,t=e.place,r=e.remainingSeconds;return a.a.createElement("div",{key:n},a.a.createElement("p",null,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430: ",n),a.a.createElement("p",null,"\u041c\u0435\u0441\u0442\u043e: ",t||"\u041d\u0430 \u0432\u044b\u043d\u043e\u0441"),a.a.createElement("p",null,"\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c: ",r," \u0441\u0435\u043a\u0443\u043d\u0434"))}))),"\u0413\u043e\u0442\u043e\u0432\u043e:",a.a.createElement($,null,t.map((function(e){var n=e.orderId,t=e.place,r=e.doneTime;return a.a.createElement("div",{key:n},a.a.createElement("p",null,"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430: ",n),a.a.createElement("p",null,"\u041c\u0435\u0441\u0442\u043e: ",t||"\u041d\u0430 \u0432\u044b\u043d\u043e\u0441"),a.a.createElement("p",null,"\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u043e \u0432: ",r," "))}))))}var V=l.b.div(F()),$=l.b.div(Z());function ee(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(p,null),a.a.createElement(M,null),a.a.createElement(Y,null))}i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...")},a.a.createElement(y,null,a.a.createElement(T,null),a.a.createElement(ee,null)))),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.7aed22c3.chunk.js.map