{"version":3,"sources":["select/assets/dropdown_arrow.png","select/index.js","App.js","index.js"],"names":["module","exports","Select","options","optionProp","handleSelectChange","useState","selectedOptions","setSelectedOptions","searchValue","setSearchValue","listVisibility","setListVisibility","selectedOptionsRef","useRef","inputRef","useEffect","showList","state","current","filter","el","forEach","classList","remove","focus","filteredOptions","map","lang","country","id","isSearchValueEmpty","trim","toLowerCase","langMatchIndex","indexOf","countryMatchIndex","find","item","key","onClick","option","selectOption","highlight","Wrap","GlobalStyles","List","length","InputWrap","i","SelectedOption","ref","e","target","add","focusSelectedOption","placeholder","value","onChange","onKeyDown","keyCode","contains","copy","pop","blur","TogglerSelect","word","index","substring","createGlobalStyle","styled","div","button","DropdownArrow","initial_languages","App","console","log","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.241e9315.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAHCAYAAADebrddAAAAZUlEQVQY02P4//8/IwMRAKxu49YdNzZu2TkNlyaQ+IatO2cA1V0FKt5Zv2HLjv9ADbPQNYD4QPG5IPkNW3ZWgwWBGprRNSArBMo3oFiHpoEZp0IsGm7hVYikoQGIv2zctqsWXQ4AGPZvtpjg4t8AAAAASUVORK5CYII=\"","import React, { useState, useRef, useEffect } from \"react\";\r\nimport styled, { createGlobalStyle } from \"styled-components\";\r\n\r\nimport DropdownArrow from \"./assets/dropdown_arrow.png\";\r\n\r\nexport function Select({ options: optionProp = [], handleSelectChange }) {\r\n  const [options] = useState(optionProp); // maybe we need to change it\r\n  const [selectedOptions, setSelectedOptions] = useState([]);\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n\r\n  const [listVisibility, setListVisibility] = useState(false);\r\n\r\n  const selectedOptionsRef = useRef([]);\r\n  const inputRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (handleSelectChange) {\r\n      handleSelectChange(selectedOptions);\r\n    }\r\n  }, [selectedOptions]);\r\n\r\n  const selectOption = (id) => {\r\n    setSelectedOptions([...selectedOptions, options.find((option) => option.id === id)]);\r\n    setListVisibility(false);\r\n    inputRef.current.focus();\r\n    selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\r\n    selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    const { target, keyCode } = e;\r\n    switch (keyCode) {\r\n      // backspace\r\n      case 8:\r\n        const isEmpty = target.value.trim().length === 0;\r\n        if (!isEmpty) return;\r\n        selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\r\n        if (!selectedOptionsRef.current.length) return;\r\n\r\n        const isActiveOption = selectedOptionsRef.current.find((el) =>\r\n          el.classList.contains(\"active\")\r\n        );\r\n\r\n        if (!isActiveOption) {\r\n          selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\r\n          selectedOptionsRef.current[selectedOptionsRef.current.length - 1].classList.add(\r\n            \"active\"\r\n          );\r\n        } else {\r\n          const copy = [...selectedOptions];\r\n          copy.pop();\r\n          setSelectedOptions(copy);\r\n        }\r\n        break;\r\n      case 40:\r\n        break;\r\n      case 27:\r\n        setListVisibility(false);\r\n        inputRef.current.blur();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setSearchValue(e.target.value);\r\n    setListVisibility(true);\r\n  };\r\n\r\n  const focusSelectedOption = ({ target }) => {\r\n    selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\r\n    selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\r\n    target.classList.add(\"active\");\r\n  };\r\n\r\n  const showList = (state) => {\r\n    selectedOptionsRef.current = selectedOptionsRef.current.filter((el) => el); // filter null\r\n    selectedOptionsRef.current.forEach((el) => el.classList.remove(\"active\"));\r\n    inputRef.current.focus();\r\n    setListVisibility(state);\r\n  };\r\n\r\n  const filteredOptions = options\r\n    .map(({ lang, country, id }) => {\r\n      const searchValueTrimmed = searchValue.trim().toLowerCase();\r\n\r\n      const isSearchValueEmpty = !searchValueTrimmed;\r\n      const langMatchIndex = lang.toLowerCase().indexOf(searchValue);\r\n      const countryMatchIndex = country.toLowerCase().indexOf(searchValue);\r\n\r\n      const isMatch =\r\n        isSearchValueEmpty || langMatchIndex !== -1 || countryMatchIndex !== -1;\r\n      if (!isMatch) return;\r\n\r\n      const isInclude = selectedOptions.find((item) => item.id === id);\r\n      if (isInclude) return;\r\n\r\n      return (\r\n        <div key={id} onClick={() => selectOption(id)}>\r\n          <p>{highlight(lang, langMatchIndex, searchValue)}</p>\r\n          <p>{highlight(country, countryMatchIndex, searchValue)}</p>\r\n        </div>\r\n      );\r\n    })\r\n    .filter((el) => el); // to delete undefined items\r\n\r\n  return (\r\n    <Wrap>\r\n      <GlobalStyles />\r\n      {listVisibility && (\r\n        <List>{filteredOptions.length ? filteredOptions : <p>No result</p>}</List>\r\n      )}\r\n\r\n      <InputWrap>\r\n        {selectedOptions.map(({ id, lang }, i) => {\r\n          return (\r\n            <SelectedOption\r\n              ref={(el) => (selectedOptionsRef.current[i] = el)}\r\n              onClick={(e) => focusSelectedOption(e)}\r\n              key={id}\r\n            >\r\n              {lang}\r\n              <button\r\n                onClick={() =>\r\n                  setSelectedOptions(selectedOptions.filter((item) => item.id !== id))\r\n                }\r\n              >\r\n                &times;\r\n              </button>\r\n            </SelectedOption>\r\n          );\r\n        })}\r\n\r\n        <input\r\n          ref={inputRef}\r\n          placeholder=\"Select languages\"\r\n          value={searchValue}\r\n          onChange={handleChange}\r\n          onKeyDown={handleKeyDown}\r\n          onClick={() => showList(true)}\r\n        />\r\n      </InputWrap>\r\n      <TogglerSelect onClick={() => showList(!listVisibility)} />\r\n    </Wrap>\r\n  );\r\n}\r\n\r\nconst highlight = (word, index, value) => {\r\n  return (\r\n    <>\r\n      {word.substring(0, index)}\r\n      {index > -1 ? (\r\n        <b>{word.substring(index, index + value.length)}</b>\r\n      ) : (\r\n        word.substring(index, index + value.length)\r\n      )}\r\n      {word.substring(index + value.length)}\r\n    </>\r\n  );\r\n};\r\n\r\nconst GlobalStyles = createGlobalStyle`\r\n  body{\r\n    font-family: Verdana;\r\n  }\r\n  input, button{\r\n    border: none;\r\n    outline: none;\r\n  }\r\n\r\n`;\r\n\r\nconst Wrap = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 300px;\r\n  padding: 10px;\r\n  border: 1px solid #d3d9de;\r\n  border-radius: 3px;\r\n  position: relative;\r\n  margin: 5px;\r\n`;\r\n\r\nconst InputWrap = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nconst List = styled.div`\r\n  border: 1px solid #c5c8cb;\r\n  max-height: 200px;\r\n  width: 100%;\r\n  left: 0;\r\n  position: absolute;\r\n  z-index: 10;\r\n  background: white;\r\n  top: calc(100% + 5px);\r\n  overflow-y: scroll;\r\n\r\n  > div {\r\n    margin: 0;\r\n    border-bottom: 1px solid #c5c8cb;\r\n    padding: 10px 5px;\r\n\r\n    &:hover {\r\n      background: #dae2ea;\r\n    }\r\n\r\n    p {\r\n      margin: 5px 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst SelectedOption = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  background: #dae2ea;\r\n  margin: 5px 2px;\r\n  padding: 3px 4px;\r\n  color: #55677d;\r\n\r\n  &.active {\r\n    background: #577ca1;\r\n    color: white;\r\n  }\r\n\r\n  &.active button {\r\n    color: white;\r\n  }\r\n\r\n  button {\r\n    margin: 0;\r\n    width: 20px;\r\n    background: none;\r\n    font-size: 24px;\r\n    line-height: 0;\r\n    color: #55677d;\r\n  }\r\n`;\r\n\r\nconst TogglerSelect = styled.button`\r\n  height: 30px;\r\n  width: 30px;\r\n  background: url(${DropdownArrow}) no-repeat center;\r\n  background-size: 15px;\r\n  border: none;\r\n  outline: none;\r\n  cursor: pointer;\r\n`;\r\n","import React from \"react\";\nimport { Select } from \"./select\";\n\nconst initial_languages = [\n  {\n    lang: \"Қазақша\",\n    country: \"Kazakhstan\",\n    id: 0,\n  },\n  {\n    lang: \"Русский\",\n    country: \"Россия\",\n    id: 1,\n  },\n  {\n    lang: \"English\",\n    country: \"USA\",\n    id: 2,\n  },\n  {\n    lang: \"English\",\n    country: \"UK\",\n    id: 3,\n  },\n  {\n    lang: \"Arabic\",\n    country: \"Saudia\",\n    id: 4,\n  },\n  {\n    lang: \"Italian\",\n    country: \"Italy\",\n    id: 5,\n  },\n  {\n    lang: \"Spanish\",\n    country: \"Spain\",\n    id: 6,\n  },\n];\n\nfunction App() {\n  return (\n    <>\n      <Select\n        options={initial_languages}\n        handleSelectChange={(value) => console.log(value)}\n      />\n\n      <Select\n        options={initial_languages}\n        handleSelectChange={(value) => console.log(value)}\n      />\n\n      <Select\n        options={initial_languages}\n        handleSelectChange={(value) => console.log(value)}\n      />\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}